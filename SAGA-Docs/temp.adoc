Perfect! Your event flow is working. Now to trigger the Notification Service, you need to test the `PaymentSettledEvent` processing.

## Test Notification Service

### Option 1: Test via REST API
```bash
curl -X POST http://localhost:8083/api/notification/test/payment-settled \
  -H "Content-Type: application/json" \
  -d '{
    "paymentId": "test-payment-123",
    "orderId": "test-order-456", 
    "settlementId": "settlement-789",
    "amount": "$100.00",
    "timestamp": "2026-02-14T15:43:21.339"
  }'
```

### Option 2: Check if Notification Service Receives Events
Since you have `PaymentSettledEvent` in Axon Server, the notification service should automatically receive it if configured properly.

Check notification service logs:
```bash
# Start notification service and watch logs
./run-ms.sh
```

## Expected ASCIIDoc Output

```asciidoc
== Notification Service Test Results

=== Test via REST API
[source,bash]
----
curl -X POST http://localhost:8083/api/notification/test/payment-settled \
  -H "Content-Type: application/json" \
  -d '{
    "paymentId": "test-payment-123",
    "orderId": "test-order-456", 
    "settlementId": "settlement-789",
    "amount": "$100.00",
    "timestamp": "2026-02-14T15:43:21.339"
  }'
----

=== Expected Log Output
[source,log]
----
INFO: Processing payment settled notification for paymentId: test-payment-123
INFO: Notification sent via email: test@example.com
INFO: SMS notification sent to: +1234567890
----

=== Event Processing Verification
* PaymentSettledEvent received from Axon Server ✓
* Notification processed successfully ✓  
* Email notification sent ✓
* SMS notification sent ✓
```

The notification service should automatically process the `PaymentSettledEvent` that was published by your settlement service. Check the logs to see if it's receiving the event from Axon Server.

---


##########


Notification Service Role
What It Does:
Receives events from Axon Server (PaymentSettledEvent, PaymentRejectedEvent, etc.)
Sends notifications (email, SMS, push notifications)
Logs notifications to database for audit trail
Provides REST APIs to query notification status
What It Does NOT Do:
Does NOT publish events back to Axon Server
Does NOT trigger other services
Does NOT participate in command/query flow
Event Flow Architecture
asciidoc
== Event Flow Pattern
 
=== Complete Payment Flow
[source,ascii]
----
REST API → Authorization Service → Axon Server
    ↓
PaymentInitiatedEvent → Authorization Service
    ↓  
PaymentAuthorizedEvent → Settlement Service
    ↓
PaymentSettledEvent → Notification Service (TERMINAL)
    ↓
[Email/SMS sent] → END
----
Why This Design Makes Sense
Single Responsibility: Notification service only handles notifications
No Side Effects: Sending notifications shouldn't trigger business logic
Audit Trail: Notifications are logged but don't affect payment flow
Resilience: If notification fails, payment is still complete
Alternative Patterns (Not Used Here)
asciidoc
=== NotificationSentEvent (Alternative - NOT implemented)
* Could publish NotificationSentEvent for tracking
* Could trigger analytics service
* Could update customer communication preferences
* Adds complexity but provides more observability